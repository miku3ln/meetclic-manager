!function(e,t){"use strict";"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueTimepicker=t()}(this,function(){"use strict";function e(e){const t={HOUR_TOKENS:["HH","H","hh","h","kk","k"],MINUTE_TOKENS:["mm","m"],SECOND_TOKENS:["ss","s"],APM_TOKENS:["A","a"]};var s=e.extend({name:"VueTimepicker",props:{id:{type:String},value:{type:Object},hideClearButton:{type:Boolean},format:{type:String},minuteInterval:{type:Number},secondInterval:{type:Number}},data:()=>({hours:[],minutes:[],seconds:[],apms:[],showDropdown:!1,muteWatch:!1,hourType:"HH",minuteType:"mm",secondType:"",apmType:"",hour:"",minute:"",second:"",apm:"",fullValues:void 0}),computed:{displayTime(){let e=String(this.format||"HH:mm");return this.hour&&(e=e.replace(new RegExp(this.hourType,"g"),this.hour)),this.minute&&(e=e.replace(new RegExp(this.minuteType,"g"),this.minute)),this.second&&this.secondType&&(e=e.replace(new RegExp(this.secondType,"g"),this.second)),this.apm&&this.apmType&&(e=e.replace(new RegExp(this.apmType,"g"),this.apm)),e},showClearBtn(){return!!(this.hour&&""!==this.hour||this.minute&&""!==this.minute)}},watch:{format:"renderFormat",minuteInterval(e){this.renderList("minute",e)},secondInterval(e){this.renderList("second",e)},value:"readValues",displayTime:"fillValues"},methods:{formatValue(e,t){switch(e){case"H":case"m":case"s":return String(t);case"HH":case"mm":case"ss":return t<10?`0${t}`:String(t);case"h":case"k":return String(t+1);case"hh":case"kk":return t+1<10?`0${t+1}`:String(t+1);default:return""}},checkAcceptingType(e,t,s){if(!e||!t||!t.length)return"";for(let s=0;s<e.length;s++)if(t.indexOf(e[s])>-1)return e[s];return s||""},renderFormat(e){(e=e||this.format)&&e.length||(e="HH:mm"),this.hourType=this.checkAcceptingType(t.HOUR_TOKENS,e,"HH"),this.minuteType=this.checkAcceptingType(t.MINUTE_TOKENS,e,"mm"),this.secondType=this.checkAcceptingType(t.SECOND_TOKENS,e),this.apmType=this.checkAcceptingType(t.APM_TOKENS,e),this.renderHoursList(),this.renderList("minute"),this.secondType&&this.renderList("second"),this.apmType&&this.renderApmList();const s=this;this.$nextTick(()=>{s.readValues()})},renderHoursList(){const e="h"===this.hourType||"hh"===this.hourType?12:24;this.hours=[];for(let t=0;t<e;t++)this.hours.push(this.formatValue(this.hourType,t))},renderList(e,t){if("second"===e)t=t||this.secondInterval;else{if("minute"!==e)return;t=t||this.minuteInterval}0===t?t=60:t>60?(window.console.warn("`"+e+"-interval` should be less than 60. Current value is",t),t=1):t<1?(window.console.warn("`"+e+"-interval` should be NO less than 1. Current value is",t),t=1):t||(t=1),"minute"===e?this.minutes=[]:this.seconds=[];for(let s=0;s<60;s+=t)"minute"===e?this.minutes.push(this.formatValue(this.minuteType,s)):this.seconds.push(this.formatValue(this.secondType,s))},renderApmList(){this.apms=[],this.apmType&&(this.apms="A"===this.apmType?["AM","PM"]:["am","pm"])},readValues(){if(!this.value||this.muteWatch)return;const e=JSON.parse(JSON.stringify(this.value||{})),t=Object.keys(e);0!==t.length&&(t.indexOf(this.hourType)>-1&&(this.hour=e[this.hourType]),t.indexOf(this.minuteType)>-1&&(this.minute=e[this.minuteType]),t.indexOf(this.secondType)>-1?this.second=e[this.secondType]:this.second=0,t.indexOf(this.apmType)>-1&&(this.apm=e[this.apmType]),this.fillValues())},fillValues(){let e={};const s=this.hour,i=this.hourType,n=s||0===s?Number(s):"",h=this.isTwelveHours(i),r=!(!h||!this.apm)&&String(this.apm).toLowerCase();if(t.HOUR_TOKENS.forEach(t=>{if(t===i)return void(e[t]=s);let o,a;switch(t){case"H":case"HH":if(!String(n).length)return void(e[t]="");o=h?"pm"===r?n<12?n+12:n:n%12:n%24,e[t]="HH"===t&&o<10?`0${o}`:String(o);break;case"k":case"kk":if(!String(n).length)return void(e[t]="");o=h?"pm"===r?n<12?n+12:n:12===n?24:n:0===n?24:n,e[t]="kk"===t&&o<10?`0${o}`:String(o);break;case"h":case"hh":if(r)o=n,a=r||"am";else{if(!String(n).length)return e[t]="",e.a="",void(e.A="");n>11?(a="pm",o=12===n?12:n%12):(a=h?"":"am",o=n%12==0?12:n)}e[t]="hh"===t&&o<10?`0${o}`:String(o),e.a=a,e.A=a.toUpperCase()}}),this.minute||0===this.minute){const t=Number(this.minute);e.m=String(t),e.mm=t<10?`0${t}`:String(t)}else e.m="",e.mm="";if(this.second||0===this.second){const t=Number(this.second);e.s=String(t),e.ss=t<10?`0${t}`:String(t)}else e.s="",e.ss="";this.fullValues=e,this.updateTimeValue(e),this.$emit("change",{data:e})},updateTimeValue(e){this.muteWatch=!0;const t=this,s=JSON.parse(JSON.stringify(this.value||{}));let i={};Object.keys(s).forEach(t=>{i[t]=e[t]}),this.$emit("input",i),this.$nextTick(()=>{t.muteWatch=!1})},isTwelveHours:e=>"h"===e||"hh"===e,toggleDropdown(){this.showDropdown=!this.showDropdown},select(e,t){"hour"===e?this.hour=t:"minute"===e?this.minute=t:"second"===e?this.second=t:"apm"===e&&(this.apm=t)},clearTime(){this.hour="",this.minute="",this.second="",this.apm=""}},mounted(){this.renderFormat()},template:'<span class="time-picker"><input class="display-time" :id="id" v-model="displayTime" @click.stop="toggleDropdown" type="text" readonly /><span class="clear-btn" v-if="!hideClearButton" v-show="!showDropdown && showClearBtn" @click.stop="clearTime">&times;</span><div class="time-picker-overlay" v-if="showDropdown" @click.stop="toggleDropdown"></div><div class="dropdown" v-show="showDropdown"><div class="select-list"><ul class="hours"><li class="hint" v-text="hourType"></li><li v-for="hr in hours" v-text="hr" :class="{active: hour === hr}" @click.stop="select(\'hour\', hr)"></li></ul><ul class="minutes"><li class="hint" v-text="minuteType"></li><li v-for="m in minutes" v-text="m" :class="{active: minute === m}" @click.stop="select(\'minute\', m)"></li></ul><ul class="seconds" v-if="secondType"><li class="hint" v-text="secondType"></li><li v-for="s in seconds" v-text="s" :class="{active: second === s}" @click.stop="select(\'second\', s)"></li></ul><ul class="apms" v-if="apmType"><li class="hint" v-text="apmType"></li><li v-for="a in apms" v-text="a" :class="{active: apm === a}" @click.stop="select(\'apm\', a)"></li></ul></div></div></span>'});e.component("vue-timepicker",s)}return"undefined"!=typeof Vue&&Vue.use(e),e});
